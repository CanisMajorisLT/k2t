{"version":3,"sources":["statistics_calculation_functions.js"],"names":[],"mappings":"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","file":"statistics_calculation_functions-compiled.js","sourcesContent":["/**\r\n * Created by vyt on 2015-08-11.\r\n */\r\nvar localstr = require(\"../../../test/utils/localstorageoutput\");\r\n\r\nvar oneTextInputData = JSON.parse('{\"textId\":\"fb47f3c56e89118dc79dea92bdca31a7-1439310680848\",\"startTime\":1439310682411,\"endTime\":1439310698557,\"wordStats\":[[{\"word\":\"Gana \",\"input\":\"G\",\"matches\":true,\"allWord\":false,\"time\":1439310682411},{\"word\":\"Gana \",\"input\":\"Ga\",\"matches\":true,\"allWord\":false,\"time\":1439310682825},{\"word\":\"Gana \",\"input\":\"Gan\",\"matches\":true,\"allWord\":false,\"time\":1439310683053},{\"word\":\"Gana \",\"input\":\"Gana\",\"matches\":true,\"allWord\":false,\"time\":1439310683220},{\"word\":\"Gana \",\"input\":\"Gana \",\"matches\":true,\"allWord\":true,\"time\":1439310683464}],[{\"word\":\"nyblogas \",\"input\":\"n\",\"matches\":true,\"allWord\":false,\"time\":1439310685660},{\"word\":\"nyblogas \",\"input\":\"ni\",\"matches\":false,\"allWord\":false,\"time\":1439310686639},{\"word\":\"nyblogas \",\"input\":\"nib\",\"matches\":false,\"allWord\":false,\"time\":1439310686942},{\"word\":\"nyblogas \",\"input\":\"nibl\",\"matches\":false,\"allWord\":false,\"time\":1439310687047},{\"word\":\"nyblogas \",\"input\":\"niblo\",\"matches\":false,\"allWord\":false,\"time\":1439310687197},{\"word\":\"nyblogas \",\"input\":\"nibl\",\"matches\":false,\"allWord\":false,\"time\":1439310687440},{\"word\":\"nyblogas \",\"input\":\"nib\",\"matches\":false,\"allWord\":false,\"time\":1439310687625},{\"word\":\"nyblogas \",\"input\":\"ni\",\"matches\":false,\"allWord\":false,\"time\":1439310687975},{\"word\":\"nyblogas \",\"input\":\"n\",\"matches\":true,\"allWord\":false,\"time\":1439310688313},{\"word\":\"nyblogas \",\"input\":\"ny\",\"matches\":true,\"allWord\":false,\"time\":1439310688950},{\"word\":\"nyblogas \",\"input\":\"nyg\",\"matches\":false,\"allWord\":false,\"time\":1439310689129},{\"word\":\"nyblogas \",\"input\":\"ny\",\"matches\":true,\"allWord\":false,\"time\":1439310689561},{\"word\":\"nyblogas \",\"input\":\"nyb\",\"matches\":true,\"allWord\":false,\"time\":1439310689708},{\"word\":\"nyblogas \",\"input\":\"nybl\",\"matches\":true,\"allWord\":false,\"time\":1439310689911},{\"word\":\"nyblogas \",\"input\":\"nyblo\",\"matches\":true,\"allWord\":false,\"time\":1439310690207},{\"word\":\"nyblogas \",\"input\":\"nyblog\",\"matches\":true,\"allWord\":false,\"time\":1439310690317},{\"word\":\"nyblogas \",\"input\":\"nyblogS\",\"matches\":false,\"allWord\":false,\"time\":1439310690626},{\"word\":\"nyblogas \",\"input\":\"nyblog\",\"matches\":true,\"allWord\":false,\"time\":1439310691033},{\"word\":\"nyblogas \",\"input\":\"nyblogA\",\"matches\":false,\"allWord\":false,\"time\":1439310691644},{\"word\":\"nyblogas \",\"input\":\"nyblogAS\",\"matches\":false,\"allWord\":false,\"time\":1439310691707},{\"word\":\"nyblogas \",\"input\":\"nyblogAS \",\"matches\":false,\"allWord\":true,\"time\":1439310691982},{\"word\":\"nyblogas \",\"input\":\"nyblogAS\",\"matches\":false,\"allWord\":false,\"time\":1439310692304},{\"word\":\"nyblogas \",\"input\":\"nyblogA\",\"matches\":false,\"allWord\":false,\"time\":1439310692423},{\"word\":\"nyblogas \",\"input\":\"nyblog\",\"matches\":true,\"allWord\":false,\"time\":1439310693034},{\"word\":\"nyblogas \",\"input\":\"nybloga\",\"matches\":true,\"allWord\":false,\"time\":1439310693369},{\"word\":\"nyblogas \",\"input\":\"nyblogas\",\"matches\":true,\"allWord\":false,\"time\":1439310693545},{\"word\":\"nyblogas \",\"input\":\"nyblogas \",\"matches\":true,\"allWord\":true,\"time\":1439310693969}],[{\"word\":\"tekstuks, \",\"input\":\"t\",\"matches\":true,\"allWord\":false,\"time\":1439310694461},{\"word\":\"tekstuks, \",\"input\":\"te\",\"matches\":true,\"allWord\":false,\"time\":1439310694749},{\"word\":\"tekstuks, \",\"input\":\"tek\",\"matches\":true,\"allWord\":false,\"time\":1439310694876},{\"word\":\"tekstuks, \",\"input\":\"teks\",\"matches\":true,\"allWord\":false,\"time\":1439310695009},{\"word\":\"tekstuks, \",\"input\":\"tekst\",\"matches\":true,\"allWord\":false,\"time\":1439310695286},{\"word\":\"tekstuks, \",\"input\":\"tekstu\",\"matches\":true,\"allWord\":false,\"time\":1439310695420},{\"word\":\"tekstuks, \",\"input\":\"tekstuk\",\"matches\":true,\"allWord\":false,\"time\":1439310696206},{\"word\":\"tekstuks, \",\"input\":\"tekstuks\",\"matches\":true,\"allWord\":false,\"time\":1439310696301},{\"word\":\"tekstuks, \",\"input\":\"tekstuks,\",\"matches\":true,\"allWord\":false,\"time\":1439310696590},{\"word\":\"tekstuks, \",\"input\":\"tekstuks, \",\"matches\":true,\"allWord\":true,\"time\":1439310696787}],[{\"word\":\"okei?\",\"input\":\"o\",\"matches\":true,\"allWord\":false,\"time\":1439310697807},{\"word\":\"okei?\",\"input\":\"ok\",\"matches\":true,\"allWord\":false,\"time\":1439310697987},{\"word\":\"okei?\",\"input\":\"oke\",\"matches\":true,\"allWord\":false,\"time\":1439310698060},{\"word\":\"okei?\",\"input\":\"okei\",\"matches\":true,\"allWord\":false,\"time\":1439310698129},{\"word\":\"okei?\",\"input\":\"okei?\",\"matches\":true,\"allWord\":true,\"time\":1439310698557}]]}');\r\nvar oneTextWordsData = oneTextInputData.wordStats;\r\n\r\nvar twoTextInputData = JSON.parse(localstr.textTwo);\r\nvar twoTextWordsData = twoTextInputData.wordStats;\r\n\r\nvar threeTextInputData = JSON.parse(localstr.textThree);\r\nvar threeTextWordsData = threeTextInputData.wordStats;\r\n\r\n\r\nlet calculateWPM = exports.calculateWPM = (startTime, finishTime, textLengthInWords) => {\r\n    if (!startTime || !finishTime || !textLengthInWords) {\r\n        return 0\r\n    }\r\n    return (textLengthInWords / ((finishTime - startTime) / 1000)) * 60\r\n};\r\n\r\n/**@param {object) wordsStatsArray from StatsObj.wordStats\r\n * @return {object} {totalMistakesInText: 0, words: {word(str): {count: 0, mistakes: 0, heatMap: [], typingTime: {all: [], fastest: null}}}}*/\r\nlet wordsStatisticsCalculator_deprected = exports.wordsStatisticsCalculator_deprected = (wordsStatsArray, trimAndClean=true) => {\r\n    return wordsStatsArray\r\n        .map((singleWordStatsArray) => {\r\n            return singleWordStats(singleWordStatsArray, trimAndClean=true)\r\n        })\r\n        .reduce((accumulated, eachTextWordStatsObject) => {\r\n            let word = eachTextWordStatsObject.word;\r\n            let heatMap = eachTextWordStatsObject.heatMap;\r\n            let tempTotalMistakesInText = accumulated.totalMistakesInText + eachTextWordStatsObject.mistakes;\r\n            if (!accumulated.words.hasOwnProperty(word)) {\r\n                accumulated.words[word] = {count: 0, mistakes: 0, heatMap: [], typingTime: {all: [], fastest: null}}\r\n            }\r\n\r\n            accumulated.words[word].mistakes += eachTextWordStatsObject.mistakes;\r\n            accumulated.words[word].count += 1;\r\n            let FastestTypingTime = accumulated.words[word].typingTime.fastest;\r\n            if (!FastestTypingTime || FastestTypingTime < eachTextWordStatsObject.typingTime) {\r\n                accumulated.words[word].typingTime.fastest = eachTextWordStatsObject.typingTime\r\n            }\r\n            accumulated.words[word].typingTime.all.push(eachTextWordStatsObject.typingTime);\r\n\r\n            if (accumulated.words[word].heatMap.length === 0) {\r\n                accumulated.words[word].heatMap = heatMap\r\n            }\r\n            else {\r\n                accumulated.words[word].heatMap.map((mistake, index) => {\r\n                    let mistake2 = heatMap[index];\r\n                    if (!mistake && !mistake2) {\r\n                        return undefined\r\n                    }\r\n                    else {\r\n                        return mistake + mistake2\r\n                    }\r\n                });\r\n            }\r\n\r\n\r\n            return {totalMistakesInText: tempTotalMistakesInText, words: accumulated.words}\r\n\r\n        }, {totalMistakesInText: 0, words: {}});\r\n\r\n\r\n};\r\n\r\n/**@param {object) wordsStatsArray from StatsObj.wordStats\r\n * @return {object} {totalMistakesInText: 0, words: [singleWordStats, singleWordStats, {object} {word: str, mistakes: number, heatMap: [], typingTime: number}]}*/\r\nlet wordsStatisticsCalculator = exports.wordsStatisticsCalculator = (wordsStatsArray, trimAndClean=true) => {\r\n    return wordsStatsArray\r\n        .map((singleWordStatsArray) => {\r\n            return singleWordStats(singleWordStatsArray, trimAndClean=true)\r\n        })\r\n        .reduce((accumulated, eachTextWordStatsObject) => {\r\n            let tempTotalMistakesInText = accumulated.totalMistakesInText + eachTextWordStatsObject.mistakes;\r\n            accumulated.words.push(eachTextWordStatsObject);\r\n            return {totalMistakesInText: tempTotalMistakesInText, words: accumulated.words}\r\n\r\n        }, {totalMistakesInText: 0, words: []});\r\n\r\n\r\n};\r\n\r\n\r\n/**\r\n * @return {object} {word: str, mistakes: number, heatMap: [], typingTime: number}\r\n * */\r\nlet singleWordStats = exports.singleWordStats = (singleWordArray, trimAndClean=true) => {\r\n    return singleWordArray.reduce((accumulated, currentWordStatsObj, index, array) => {\r\n        var word = trimAndClean ? trimAndRemoveSigns(currentWordStatsObj.word) : currentWordStatsObj.word;\r\n        if (!accumulated.word) {\r\n            accumulated.word = word;\r\n        }\r\n        if (accumulated.heatMap.length === 0) {\r\n            accumulated.heatMap = new Array(word.length)\r\n        }\r\n\r\n        if (currentWordStatsObj.matches === false) {\r\n            ++accumulated.mistakes;\r\n\r\n            let heatMapCoord = accumulated.heatMap[currentWordStatsObj.input.length - 1];\r\n            if (!heatMapCoord) {\r\n                accumulated.heatMap[currentWordStatsObj.input.length - 1] = 1\r\n            }\r\n            else {\r\n                ++accumulated.heatMap[currentWordStatsObj.input.length - 1]\r\n            }\r\n        }\r\n        if (index === 0) {\r\n            accumulated.typingTime.tempStart = currentWordStatsObj.time\r\n        }\r\n        if (index === array.length - 1) {\r\n            let start = accumulated.typingTime.tempStart;\r\n            accumulated.typingTime = currentWordStatsObj.time - start\r\n        }\r\n\r\n        return accumulated\r\n    }, {word: null, mistakes: 0, heatMap: [], typingTime: {tempStart: 0, tempEnd: 0}})\r\n};\r\n\r\n\r\nlet trimAndRemoveSigns = word=> {\r\n    let signsToBeRemoved = [\",\", \".\", \";\", \":\", \"(\", \")\", \"!\"];\r\n    let newWord = word.trim();\r\n    return newWord.\r\n        split(\"\").\r\n        map((letter)=> {\r\n            if (signsToBeRemoved.indexOf(letter) !== -1) {\r\n                return \"\"\r\n            }\r\n            return letter\r\n        }).\r\n        join(\"\")\r\n};\r\n\r\n//wordsStatisticsCalculator(twoTextWordsData);\r\n//wordsStatisticsCalculator(threeTextWordsData);"]}